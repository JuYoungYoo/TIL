[장점] (단위)테스트 개발을 해야하는 이유?   
- 코드의 품질 보증이나 실수 재발을 방지해준다.   
- 실사용에 적합한 설계를 이끌어준다. (TDD방식일 경우)   
- 원하는 동작을 명확히 알려준다.     
- 생산성을 높여준다. -> 신뢰성, 안정성    

여기서 말하는 생산성에 직접적인 영향을 주는 것은 `피드백 주기`와 `디버깅 시간`이다.   
테스트는 디버깅의 양을 줄여준다.    
가독성이 떨어지면 분석이 더뎌지고, 실수를 찾기 어려워 결함이 만들어지며, 이는 디버깅 시간의 증가로 이어진다.    
이러한 코드의 실수(디버깅의 시간)를 줄이고 싶다면 정확하고 올바른 테스트 코드의 작성법을 터득해야 한다.   

! 올바른 테스트 코드(몇번을 해도 같은 결과를 도출하는 코드)를 작성했을 경우 테스트 코드의 신뢰성과 안정성으로 생산성을 높일수 있다.

##### 테스트 코드 작성 시 유의해야 되는 부분
1. 신뢰성
2. 가독성
3. 신뢰성
4. 테스트 속도  


___
테스트 코드도 실제 코드만큼이나 리팩토링 대상이 되어야 한다.    
제품 코드가 목적과 쓰임새에 적함한 구조가 되도록 설계수단으로 이용한다.    
( 설계 수단 )TDD 방식 : 테스트 -> 코딩 -> 리팩토링 -> 테스트 ..

###### 테스트 주도 개발 (TDD : Test Driven Development )
- 테스트 코드를 주도적으로 작성하고, 후에 실제 코드를 작성하는 설계방법이다.
- 사용할 경우 이점
  - 제품 코드의 설계와 시나리오에서 요구하는 코드만 작성되어 가벼운 코드가 만들어진다. 그 결과 확장성과 유지보수, 편의성도 높은 코드가 생산된다.

###### 행위 주도 개발( BDD : Behavior-driven Development )
- BDD는 TDD의 좋은 습관을 정형화하여 만들어낸 TDD기반의 방범론이다.
- TDD에서 테스트가 들어가야 할 자리를 행위로 바꿔 사용
- given-when-then
___

#### 좋은 테스트 개발시 유의할 점
- 테스트 코드의 가독성과 유지보수성 : 읽기 쉬운 코드가 유지보수도 쉽다.
- 테스트 코드는 독립적으로 작성되어야 한다. : 메서드 실행 순서, 클래스 순서 등에 의존해서는 X
  ( 주의가 필요한 요소 : 시간, 임의성, 동시성, 인프라, 기존 데이터, 영속성, 네트워킹 )  
  - 테스트가 필요한 문맥을 직접 설정한다.
  - 영속성이 필요한 통합 테스트인 경우 인메모리 DB를 사용한다.
- 테스트를 하는 명확한 주제를 갖고 있는지
- 안정적이고 반복적인 수행을 했을 경우 같은 결과를 도출하는 가
- 테스트 더블을 잘 활용하는지

___

### 테스트 도구 종류 : 테스트 더블
테스트 대상 코드와 협력 객체를 분리한다.     
`테스트 더블`을 사용하며 테스트 `대상 코드가 격리`되며, 테스트 속도를 개선한다. 또, 예측 불가능한 실행 요소를 제거한다.     
특수한 상황 시뮬레이션 가능하다. ( ex) Exception )    
객체 내부의 상태,동작 등 접근할 수 없던 정보를 얻을 수 있다.    
1. Stub
2. 가짜 객체
3. Mock 객체
4. Spy

###### 스텁
최대한 단순한 것으로 대체하는 것. 로직이 없고 단지 원하는 값을 반환한다. 불필요한 협력객체를 쳐낸다.      
하드코딩    
###### 가짜 객체
private한 가짜 객체를 만들어서 비교한다.
ex) private List<User> users = new ArrayList<User>(); // 지역변수로 선언
###### 테스트 스파이
본래 접근할 수 없던 내부 정보가 궁금할 때 사용하면 좋다.

`이 개념을 확장하여 Mock객체를 이용하는게 편합니다.`
###### Mock
특정 조건이 발생하면 미리 약속된 행동을 취한다.   
예상되로 메소드가 호출되지 않을 경우, 테스트는 실패한다.    
- 종류 : JMock, Mockito(추천), easyMock 등..

##### 테스트 더블 활용 지침
- 스텁은 질문하고 Mock은 행동한다.
- 준비-시작-단언 ( BDD : Given - When - Then )
- 구현이 아닌 동작을 확인한다.
- 종속 객체는 테스트 더블을 사용하여 주입한다. (생성자 주입 방식으로 많이 사용)

_____



##### 참고
- [도서] Effective Unit Testing 개발자를 위한 단위 테스트
- [TDD 세부내용](https://github.com/JuYoungYoo/TIL/blob/master/Theory/TDD.md)  
- [이혜승 - 테알못 신입은 어떻게 테스트를 시작했을까?](https://github.com/JuYoungYoo/TIL/blob/master/Theory/TDD2.md)  
- [Unit test](https://github.com/JuYoungYoo/TIL/blob/master/Java/unit-test.md)  
- [jUnit](https://github.com/JuYoungYoo/TIL/blob/master/Java/jUnit.md)
